# LLM Prompts Configuration

This directory contains customizable LLM prompts for the Elastic What's New Generator.

## File: `llm_prompts.yaml`

Configure how presentations and labs are generated by customizing the prompts sent to the LLM.

### Structure

The YAML file contains three main sections:

1. **`presentation_generator`** - Controls how presentations are created
2. **`content_extractor`** - Controls how documentation is summarized
3. **`lab_generator`** - Controls how hands-on labs are created

### Customization

#### Variables

Use `{variable_name}` syntax for dynamic content:

**Presentation Generator Variables:**
- `{slide_count}` - Number of slides (default: 7)
- `{audience}` - Target audience (business/technical/mixed)
- `{narrative_style}` - Narrative approach
- `{technical_depth}` - Technical depth level
- `{domain}` - Domain (search/observability/security/all_domains)
- `{feature_contexts}` - Auto-generated feature information

**Content Extractor Variables:**
- `{feature_name}` - Name of the feature
- `{documentation_url}` - Documentation URL
- `{scraped_content}` - Scraped documentation

**Lab Generator Variables:**
- `{domain}` - Domain name
- `{feature_name}` - Feature name
- `{feature_info}` - Feature details
- `{format_type}` - Lab format
- `{target_audience}` - Target audience
- `{difficulty_level}` - Difficulty level

### Examples

#### Adjust Presentation Tone

To make presentations more business-focused, modify `presentation_generator.system_prompt`:

```yaml
presentation_generator:
  system_prompt: |
    You are an expert at creating executive-level presentations.
    Focus on business outcomes, ROI, and competitive advantages.
    Use simple language and avoid technical jargon.
    ...
```

#### Change Slide Structure

To use a 5-slide structure instead of 7:

```yaml
presentation_generator:
  system_prompt: |
    REQUIRED PRESENTATION FLOW (5 slides):
    1. Opening Hook - Business challenge
    2. Solution Overview - Three innovations
    3. Technical Deep Dive - Combined themes
    4. Business Case - ROI and differentiation
    5. Call to Action - Next steps
    ...
```

#### Emphasize Specific Themes

To emphasize AI Innovation:

```yaml
presentation_generator:
  user_prompt: |
    Create a presentation highlighting AI/ML capabilities.
    Prioritize features with AI Innovation theme.
    Show competitive advantages in AI space.
    ...
```

### Best Practices

1. **Test incrementally** - Change one section at a time
2. **Keep JSON structure** - The output format must remain valid JSON
3. **Maintain variables** - Don't remove required variables
4. **Version control** - Track changes to prompts
5. **Backup originals** - Keep a copy of default prompts

### Troubleshooting

**Prompts not loading:**
- Check YAML syntax (use a YAML validator)
- Ensure file is named `llm_prompts.yaml`
- Check file permissions

**Invalid output:**
- Verify JSON structure in `system_prompt`
- Test with simple prompt first
- Check LLM provider logs

**Missing content:**
- Ensure all required variables are present
- Check variable names match exactly
- Verify feature data is being passed

### Fallback Behavior

If the config file is not found or invalid, the system will use built-in default prompts. Check logs for warnings.

### Reload Configuration

Changes to `llm_prompts.yaml` require restarting the server:

```bash
# Ctrl+C to stop, then:
./run.sh
```

Or if using uvicorn directly:
```bash
pkill -f "uvicorn"
./run.sh
```

The prompts are cached on first load for performance.